<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task submit</title>
</head>
<body>
<script src="https://telegram.org/js/telegram-web-app.js?59"></script>
<script type="text/tsx" src="Telegram.ts"></script>

<div>
    <h1>Task submit</h1>
    <form onSubmit="formSubmit(document.getElementById('taskform'));" id="taskform">
        <label for="taskid">Task ID:</label><br>
        <input type="text" id="taskid" name="task id"><br>
        <label for="taskname">Task name:</label><br>
        <input type="text" id="taskname" name="task name"><br>
        <label for="groupp">Group:</label><br>
        <input list="group" id="groupp"><br>
        <datalist id="group">
            <!-- Options will be dynamically inserted here -->
        </datalist>
        <br>
        <input type="submit" value="Submit">
    </form>
</div>

<script>
    const params = new URLSearchParams(document.location.search);
    
    function formSubmit(element) {
        console.log("form submit")
        console.log(element)
    }

    document.addEventListener('DOMContentLoaded', () => {
        console.log("ХУЙ");
        const tg = window.Telegram.WebApp;

        if (!tg) {
            console.error("Telegram Web App script not loaded.");
            return;
        }
        console.log("Telegram Web App script loaded.");
        console.log(tg);

        tg.ready();

        const groups = [
            "Texture",
            "Realisation",
            "Model"
        ];

        // 2. Get the <datalist> element by its ID
        const datalist = document.getElementById('group');

        // 3. Loop through the array
        groups.forEach(obj => {
            // a. Create a new <option> element
            const option = document.createElement('option');

            // b. Set its 'value' attribute to the string from the array
            option.value = obj;

            // c. Append the new <option> to the <datalist>
            datalist.appendChild(option);
        });
    });
</script>
</body>
</html>